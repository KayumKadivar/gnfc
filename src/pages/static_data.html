<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SY_PM Static Data | GNFC</title>
  <link rel="stylesheet" href="/src/css/ios-fonts.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <script src="/src/js/tailwind_config.js"></script>
  <script src="https://unpkg.com/micromodal/dist/micromodal.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }

    ::-webkit-scrollbar-track {
      background: var(--app-bg, #111217);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--app-border, #2c3235);
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--app-muted, #8e8e9e);
    }

    /* MicroModal styles */
    .modal {
      display: none;
    }

    .modal.is-open {
      display: block;
    }

    .modal__overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 100;
      backdrop-filter: blur(4px);
    }

    .modal__container {
      max-width: 90vw;
      max-height: 90vh;
      border-radius: 6px;
      overflow-y: auto;
      box-sizing: border-box;
    }

    .micromodal-slide {
      display: none;
    }

    .micromodal-slide.is-open {
      display: block;
    }

    .micromodal-slide[aria-hidden="false"] .modal__overlay {
      animation: mmfadeIn .3s cubic-bezier(0, 0, .2, 1);
    }

    .micromodal-slide[aria-hidden="false"] .modal__container {
      animation: mmslideIn .3s cubic-bezier(0, 0, .2, 1);
    }

    .micromodal-slide[aria-hidden="true"] .modal__overlay {
      animation: mmfadeOut .3s cubic-bezier(0, 0, .2, 1);
    }

    .micromodal-slide[aria-hidden="true"] .modal__container {
      animation: mmslideOut .3s cubic-bezier(0, 0, .2, 1);
    }

    .micromodal-slide .modal__container,
    .micromodal-slide .modal__overlay {
      will-change: transform;
    }

    @keyframes mmfadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes mmfadeOut {
      from {
        opacity: 1;
      }

      to {
        opacity: 0;
      }
    }

    @keyframes mmslideIn {
      from {
        transform: translateY(15%);
      }

      to {
        transform: translateY(0);
      }
    }

    @keyframes mmslideOut {
      from {
        transform: translateY(0);
      }

      to {
        transform: translateY(-10%);
      }
    }
  </style>
</head>

<body
  class="bg-dark-bg text-dark-text font-sans h-screen flex overflow-hidden selection:bg-gnfc-orange selection:text-white relative">

  <script src="/src/js/theme_manager.js"></script>
  <script src="/src/js/sidebar.js"></script>
  <script src="/src/js/header.js"></script>

  <div id="sidebar-container" class="relative z-20"></div>
  <script>
    try {
      renderSidebar('technician_logbook');
    } catch (error) {
      console.error(error);
    }
  </script>

  <main class="flex-1 flex flex-col overflow-hidden relative z-10">
    <div id="header-container"></div>

    <div class="flex-1 overflow-y-auto p-4 space-y-4 scroll-smooth">
      <div id="plant-nav-container"></div>
      <script src="/src/js/plant_nav.js"></script>
      <script>
        try {
          renderPlantNav('sy_pm');
        } catch (error) {
          console.error(error);
        }
      </script>

      <!-- Context Section -->
      <section class="rounded-xl border border-dark-border bg-dark-panel p-4 shadow-lg">
        <div class="flex justify-between items-start gap-4 flex-wrap">
          <div>
            <h2 id="sy-context-heading" class="text-lg font-bold text-white">SY_PM Context</h2>
            <p class="text-sm  mt-1">Static records are scoped to selected system and frequency.</p>
          </div>
          <div class="flex gap-2 flex-wrap text-[11px] font-bold uppercase tracking-wider">
            <span
              class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-dark-bg border border-dark-border ">
              System <strong id="sy-chip-system" class="text-dark-text">-</strong>
            </span>
            <span
              class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-dark-bg border border-dark-border ">
              Frequency <strong id="sy-chip-frequency" class="text-dark-text">-</strong>
            </span>
            <span
              class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-dark-bg border border-dark-border ">
              Rows <strong id="static-record-count" class="text-dark-text">0 records</strong>
            </span>
          </div>
        </div>
        <div class="flex gap-3 mt-5 flex-wrap">
          <button id="btn-add-record" type="button"
            class="inline-flex items-center gap-2 px-4 py-2 bg-gnfc-orange hover:bg-amber-600 text-white text-xs font-bold rounded-lg transition-all shadow-lg shadow-gnfc-orange/20 active:scale-95">
            <i class="ph-bold ph-plus text-sm"></i> Add Row
          </button>
          <button id="btn-edit-instruction" type="button"
            class="inline-flex items-center gap-2 px-4 py-2 bg-dark-header hover:bg-dark-border text-dark-text text-xs font-bold rounded-lg transition-all border border-dark-border active:scale-95">
            <i class="ph-bold ph-note-pencil text-sm"></i> Edit Instruction
          </button>
          <button id="btn-go-report" type="button"
            class="inline-flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 text-gnfc-orange border border-gnfc-orange/30 text-xs font-bold rounded-lg transition-all active:scale-95">
            <i class="ph-bold ph-file-text text-sm"></i> Open Report Workspace
          </button>
        </div>
      </section>

      <!-- Table Section -->
      <section class="rounded-xl border border-dark-border bg-dark-panel p-0 shadow-lg overflow-hidden flex flex-col">
        <div class="overflow-x-auto">
          <table class="w-full text-left text-xs border-collapse">
            <thead>
              <tr class="bg-dark-header uppercase tracking-wider border-b border-dark-border">
                <th class="px-4 py-3 font-bold w-16 text-center">Sr</th>
                <th class="px-4 py-3 font-bold">Item</th>
                <th class="px-4 py-3 font-bold">Action</th>
                <th class="px-4 py-3 font-bold">Reference Value</th>
                <th class="px-4 py-3 font-bold w-32 text-center">Actions</th>
              </tr>
            </thead>
            <tbody id="static-table-body" class="divide-y divide-dark-border text-dark-text">
              <!-- Rows injected by JS -->
            </tbody>
          </table>
        </div>
        <div id="static-empty" class="hidden p-8 text-center text-sm">No records found.</div>
      </section>

      <!-- Instruction Section -->
      <section class="rounded-xl border border-dark-border bg-dark-panel p-4 shadow-lg mb-8">
        <div class="flex justify-between items-center mb-3">
          <div>
            <h3 class="text-sm font-bold text-white">General Instruction</h3>
            <p class="text-xs  mt-0.5">Instruction content is shared with report generation and blank
              format print.</p>
          </div>
          <div class="text-[10px]  font-mono" id="instruction-updated-at">Updated: -</div>
        </div>
        <div id="instruction-preview"
          class="p-3 rounded-lg bg-dark-bg border border-dark-border text-xs text-dark-text leading-relaxed font-mono whitespace-pre-wrap min-h-[60px]">
        </div>
      </section>

    </div>
  </main>

  <!-- Add/Edit Modal (Tailwind + Theme) -->
  <div id="static-row-modal"
    class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm hidden text-dark-text"
    aria-hidden="true">
    <div
      class="w-full max-w-2xl bg-dark-panel border border-dark-border rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
      <div class="p-4 border-b border-dark-border flex justify-between items-center bg-dark-header">
        <h3 id="static-row-modal-title" class="text-sm font-bold text-white uppercase tracking-wide">Add Static Record
        </h3>
        <button type="button" data-close-modal="true" class=" hover:text-white transition-colors">
          <i class="ph-bold ph-x text-lg"></i>
        </button>
      </div>
      <form id="static-row-form" class="flex flex-col flex-1 overflow-hidden">
        <div class="p-4 overflow-y-auto space-y-5">
          <!-- <input type="hidden" id="static-row-id"> -->
          <div>
            <label class="block text-xs font-bold  uppercase mb-1.5" for="static-item">Item</label>
            <input id="static-item"
              class="w-full bg-dark-bg border border-dark-border rounded-lg px-3 py-2.5 text-sm text-dark-text focus:border-gnfc-orange focus:ring-1 focus:ring-gnfc-orange/50 outline-none transition-all placeholder:"
              type="text" maxlength="250" placeholder="Enter checklist item">
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
            <div>
              <label class="block text-xs font-bold  uppercase mb-1.5" for="static-action">Action</label>
              <input id="static-action"
                class="w-full bg-dark-bg border border-dark-border rounded-lg px-3 py-2.5 text-sm text-dark-text focus:border-gnfc-orange focus:ring-1 focus:ring-gnfc-orange/50 outline-none transition-all placeholder:"
                type="text" maxlength="250" placeholder="Action guidance">
            </div>
            <div>
              <label class="block text-xs font-bold  uppercase mb-1.5" for="static-reference">Reference
                Value</label>
              <input id="static-reference"
                class="w-full bg-dark-bg border border-dark-border rounded-lg px-3 py-2.5 text-sm text-dark-text focus:border-gnfc-orange focus:ring-1 focus:ring-gnfc-orange/50 outline-none transition-all placeholder:"
                type="text" maxlength="180" placeholder="Reference value">
            </div>
          </div>
        </div>
        <div class="p-4 border-t border-dark-border bg-dark-header flex justify-end gap-3">
          <button type="button" data-close-modal="true"
            class="px-4 py-2 rounded-md border border-dark-border  text-xs font-bold hover:text-white hover:bg-dark-border transition-colors">Cancel</button>
          <button type="submit"
            class="px-4 py-2 rounded-md bg-gnfc-orange text-white text-xs font-bold hover:bg-amber-600 transition-all shadow-lg shadow-gnfc-orange/20">Save</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Instruction Modal (Tailwind + Theme) -->
  <div id="instruction-modal"
    class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm hidden text-dark-text"
    aria-hidden="true">
    <div
      class="w-full max-w-xl bg-dark-panel border border-dark-border rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
      <div class="p-4 border-b border-dark-border flex justify-between items-center bg-dark-header">
        <h3 class="text-sm font-bold text-white uppercase tracking-wide">Edit Instruction</h3>
        <button type="button" data-close-modal="true" class=" hover:text-white transition-colors">
          <i class="ph-bold ph-x text-lg" data-close-modal="true"></i>
        </button>
      </div>
      <form id="instruction-form" class="flex flex-col flex-1 overflow-hidden">
        <div class="p-6 overflow-y-auto">
          <div>
            <label class="block text-xs font-bold  uppercase mb-1.5" for="instruction-input">Instruction
              Text</label>
            <textarea id="instruction-input"
              class="w-full bg-dark-bg border border-dark-border rounded-lg px-3 py-2.5 text-sm text-dark-text focus:border-gnfc-orange focus:ring-1 focus:ring-gnfc-orange/50 outline-none transition-all placeholder: min-h-[150px]"
              placeholder="Enter report instruction"></textarea>
          </div>
        </div>
        <div class="p-4 border-t border-dark-border bg-dark-header flex justify-end gap-3">
          <button type="button" data-close-modal="true"
            class="px-4 py-2 rounded-lg border border-dark-border  text-xs font-bold hover:text-white hover:bg-dark-border transition-colors">Cancel</button>
          <button type="submit"
            class="px-4 py-2 rounded-lg bg-gnfc-orange text-white text-xs font-bold hover:bg-amber-600 transition-all shadow-lg shadow-gnfc-orange/20">Update
            Instruction</button>
        </div>
      </form>
    </div>
  </div>

  <script type="module" src="/src/js/sy_pm/page_static.js"></script>
  <script src="/src/js/emg_call_modal.js"></script>
  <script src="/src/js/pagination.js"></script>
</body>

</html>