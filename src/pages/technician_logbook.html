<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plant Sections | GNFC</title>

  <link rel="stylesheet" href="/src/css/ios-fonts.css">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <script src="/src/js/tailwind_config.js"></script>
  <script>
    window.activePage = 'technician_logbook';
  </script>

</head>

<body class="bg-dark-bg text-dark-text font-sans h-screen flex overflow-hidden">

  <script src="/src/js/theme_manager.js"></script>
  <script src="/src/js/sidebar.js"></script>
  <script src="/src/js/elogbook_store.js"></script>
  <div id="sidebar-container"></div>
  <script>renderSidebar('technician_logbook');</script>

  <main class="flex-1 flex flex-col h-screen overflow-hidden">

    <div id="header-container"></div>
    <script src="/src/js/header.js"></script>
    <script>
      renderHeader({
        title: "Technician's Logbook",
        breadcrumbs: [
          { label: "Technician's Logbook" } // Single level for main page
        ],
        // backLink not needed for top level or can point to home
        backLink: "/index.html"
      });
    </script>


    <div class="flex-1 overflow-y-auto p-4 bg-dark-bg">

      <div
        class="flex items-center justify-between mb-6 bg-dark-panel p-2 border border-dark-border rounded-md shadow-sm">

        <div class="flex items-center gap-3 px-2">
          <div class="flex items-center gap-2 text-gnfc-blue">
            <i class="ph-fill ph-calendar-blank"></i>
            <span class="text-xs font-bold uppercase tracking-wide">Time Range</span>
          </div>
          <div class="h-4 w-px bg-dark-border"></div>

          <div class="flex bg-dark-bg p-0.5 rounded-md border border-dark-border">
            <button data-view="today"
              class="time-btn px-4 py-1.5 text-[11px] font-bold rounded-[4px] transition-all duration-200 border border-transparent"
              aria-pressed="true">
              Today
            </button>
            <button data-view="prev"
              class="time-btn px-4 py-1.5 text-[11px] font-bold rounded-[4px] transition-all duration-200 border border-transparent text-dark-muted hover:text-white"
              aria-pressed="false">
              Prev Day
            </button>
            <button data-view="weekly"
              class="time-btn px-4 py-1.5 text-[11px] font-bold rounded-[4px] transition-all duration-200 border border-transparent text-dark-muted hover:text-white"
              aria-pressed="false">
              Weekly
            </button>
          </div>
        </div>
      </div>


      <div class="bg-dark-panel border border-dark-border rounded-sm">

        <div class="flex items-center justify-between px-4 py-2 border-b border-dark-border">
          <h3 class="font-medium text-gnfc-blue text-sm">
            Select Plant Unit
          </h3>
        </div>

        <div id="plant-grid" class="p-4 grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-2">
        </div>

      </div>

      <section class="mt-6 mb-4">

        <div class="flex items-center gap-3 mb-4">
          <div class="h-8 w-1 bg-gnfc-blue rounded-full"></div>
          <h3 class="text-white font-bold text-sm tracking-wide">Officer Logbook Quick Access</h3>
          <div class="h-px flex-1 bg-dark-border"></div>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">

          <button onclick="window.location.href='/src/pages/shift_logbook.html?view=today'"
            class="relative overflow-hidden bg-dark-panel border border-dark-border hover:border-gnfc-blue/50 p-4 rounded-md group text-left transition-all hover:shadow-lg hover:-translate-y-0.5">
            <div class="absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity">
              <i class="ph-fill ph-calendar-check text-4xl text-gnfc-blue"></i>
            </div>
            <p class="text-[10px] font-bold text-dark-muted uppercase tracking-wider mb-1">View Report</p>
            <h4 class="text-sm font-bold text-white group-hover:text-gnfc-blue transition-colors">Today</h4>
          </button>

          <button onclick="window.location.href='/src/pages/shift_logbook.html?view=prev'"
            class="relative overflow-hidden bg-dark-panel border border-dark-border hover:border-gnfc-blue/50 p-4 rounded-md group text-left transition-all hover:shadow-lg hover:-translate-y-0.5">
            <div class="absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity">
              <i class="ph-fill ph-clock-counter-clockwise text-4xl text-gnfc-blue"></i>
            </div>
            <p class="text-[10px] font-bold text-dark-muted uppercase tracking-wider mb-1">View Report</p>
            <h4 class="text-sm font-bold text-white group-hover:text-gnfc-blue transition-colors">Previous Day</h4>
          </button>

          <button onclick="window.location.href='/src/pages/shift_logbook.html?view=weekly'"
            class="relative overflow-hidden bg-dark-panel border border-dark-border hover:border-gnfc-blue/50 p-4 rounded-md group text-left transition-all hover:shadow-lg hover:-translate-y-0.5">
            <div class="absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity">
              <i class="ph-fill ph-calendar-plus text-4xl text-gnfc-blue"></i>
            </div>
            <p class="text-[10px] font-bold text-dark-muted uppercase tracking-wider mb-1">View Report</p>
            <h4 class="text-sm font-bold text-white group-hover:text-gnfc-blue transition-colors">Weekly</h4>
          </button>

          <button onclick="window.location.href='/src/pages/shift_logbook.html?view=monthly'"
            class="relative overflow-hidden bg-dark-panel border border-dark-border hover:border-gnfc-blue/50 p-4 rounded-md group text-left transition-all hover:shadow-lg hover:-translate-y-0.5">
            <div class="absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity">
              <i class="ph-fill ph-calendar text-4xl text-gnfc-blue"></i>
            </div>
            <p class="text-[10px] font-bold text-dark-muted uppercase tracking-wider mb-1">View Report</p>
            <h4 class="text-sm font-bold text-white group-hover:text-gnfc-blue transition-colors">Monthly</h4>
          </button>

        </div>

      </section>
    </div>

  </main>


  <script>
    const timeButtons = document.querySelectorAll(".time-btn");
    let selectedView = "today";

    function setSelectedView(viewName, persist = true) {
      selectedView = ["today", "prev", "weekly", "monthly"].includes(viewName) ? viewName : "today";

      timeButtons.forEach((btn) => {
        const btnView = btn.dataset.view || "";
        const isActive = btnView === selectedView;

        // Reset classes
        btn.className = "time-btn px-4 py-1.5 text-[11px] font-bold rounded-[4px] transition-all duration-200 border border-transparent";

        if (isActive) {
          btn.classList.add("bg-gnfc-blue", "text-white", "shadow-sm");
          btn.setAttribute("aria-pressed", "true");
        } else {
          btn.classList.add("text-dark-muted", "hover:text-white", "hover:bg-white/5");
          btn.setAttribute("aria-pressed", "false");
        }
      });

      if (persist && window.ElogbookStore && typeof window.ElogbookStore.setTechnicianSelectedView === "function") {
        window.ElogbookStore.setTechnicianSelectedView(selectedView);
      }
      renderPlantCards();
    }

    timeButtons.forEach((button) => {
      button.addEventListener("click", () => {
        setSelectedView(button.dataset.view || "today", true);
      });
    });
  </script>

  <script>
    const units = [
      'AA', 'AAQM', 'AMM', 'ANIPF', 'ANITDI',
      'ASGP', 'BAGG', 'BOILER', 'CMS', 'CPSU',
      'DM', 'EA', 'FA', 'INST WS', 'M1', 'M2', 'UREA'
    ];

    const grid = document.getElementById('plant-grid');

    function renderPlantCards() {
      let gridContent = '';
      units.forEach((code, i) => {
        // Mock status logic for demo
        const status = i % 4 === 0 ? 'Maintenance' : 'Operational';
        const color = status === 'Operational' ? '#73BF69' : '#FF9900';
        const unitNumber = (i + 1).toString().padStart(2, '0');
        const href = `/src/pages/plant_detail.html?plant=${encodeURIComponent(code)}&view=${encodeURIComponent(selectedView)}`;

        // Refined Card Design (Dashboard-like)
        gridContent += `
          <a href="${href}"
             class="relative bg-dark-panel border border-dark-border hover:border-gnfc-blue
                    rounded-sm p-4 h-24 flex flex-col justify-between
                    group transition-all duration-200 shadow-sm hover:shadow-md hover:-translate-y-0.5 overflow-hidden">
              
              <!-- Colored Left Border Strip -->
              <div class="absolute left-0 top-0 bottom-0 w-1" style="background-color: ${color}"></div>

              <div class="flex justify-between items-start pl-2">
                  <span class="text-[10px] font-mono text-dark-muted font-bold tracking-wider">${unitNumber}</span>
                  <div class="w-1.5 h-1.5 rounded-full" style="background-color: ${color}; box-shadow: 0 0 4px ${color}"></div>
              </div>

              <div class="pl-2 flex items-end justify-between">
                  <h3 class="text-lg font-bold text-white tracking-tight group-hover:text-gnfc-blue transition-colors">${code}</h3>
                  <span class="text-[9px] uppercase font-bold text-dark-muted tracking-wider" style="color: ${color}">${status}</span>
              </div>
          </a>
        `;
      });
      grid.innerHTML = gridContent;
    }

    const persistedView = (window.ElogbookStore && typeof window.ElogbookStore.getTechnicianSelectedView === "function")
      ? window.ElogbookStore.getTechnicianSelectedView()
      : "today";
    setSelectedView(persistedView, false);
  </script>


</body>

</html>