<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document Change Required | GNFC</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <script src="/src/js/tailwind_config.js"></script>
  <link rel="stylesheet" href="/src/css/ios-fonts.css">
  <link rel="stylesheet" href="/src/css/typography.css">
  <link rel="stylesheet" href="/src/css/modal-ui.css">
  <link rel="stylesheet" href="/src/css/table-style.css">
  <style>
    /* Modern Report Aesthetic (matching HSO) */
    .report-container {
      background: var(--app-panel);
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid var(--app-border);
      color: var(--app-text);
      font-size: 13px;
    }

    .report-header {
      background: var(--app-panel-alt);
      padding: 16px 20px;
      border-bottom: 2px solid var(--app-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .report-title {
      font-weight: 800;
      font-size: 20px;
      letter-spacing: 0.02em;
      color: var(--app-text);
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .report-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
    }

    .report-table th {
      background: var(--app-panel-alt);
      color: var(--app-text);
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      padding: 12px 14px;
      border-bottom: 2px solid var(--app-border);
      border-right: 1px solid var(--app-border);
      text-align: left;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .report-table th:last-child { border-right: none; }

    .report-table td {
      padding: 14px;
      border-bottom: 1px solid var(--app-border);
      border-right: 1px solid var(--app-border);
      vertical-align: top;
      line-height: 1.5;
    }

    .report-table td:last-child { border-right: none; }

    .report-table tr:hover td {
      background-color: rgba(59, 130, 246, 0.04);
    }

    .status-over { color: #10b981; font-weight: 700; }
    .status-pending { color: #f59e0b; font-weight: 700; }

    .verify-checkbox {
      width: 18px;
      height: 18px;
      accent-color: var(--app-primary);
      cursor: pointer;
    }
  </style>
</head>

<body class="bg-dark-bg color-primary h-screen flex overflow-hidden">
  <script src="/src/js/theme_manager.js"></script>
  <script src="/src/js/sidebar.js"></script>
  <script src="/src/js/header.js"></script>
  <div id="sidebar-container"></div>
  <script>try { renderSidebar('technician_logbook'); } catch (e) { }</script>

  <main class="flex-1 flex flex-col h-screen overflow-hidden">
    <div id="header-container"></div>
    <script>
      renderHeader({
        title: "Document Change Required",
        breadcrumbs: [
          { label: "Technician Log", href: "technician_logbook.html" },
          { label: "Plant Detail", href: "plant_detail.html" },
          { label: "Doc. Change" }
        ],
        backLink: "plant_detail.html"
      });
    </script>

    <div class="flex-1 overflow-y-auto p-4 bg-dark-bg space-y-4">
      <div id="plant-nav-container"></div>
      <script src="/src/js/plant_nav.js"></script>
      <script>renderPlantNav('doc_change');</script>

      <div class="report-container shadow-md">
        <div class="report-header">
          <div class="report-title">
            <i class="ph-duotone ph-file-doc text-blue-500"></i>
            <span>Document Change Required</span>
          </div>
          <div class="flex items-center gap-4">
             <div class="text-xs color-label font-mono bg-dark-bg px-3 py-1 rounded border border-dark-border">
                PLANT: <span id="plant-id-display" class="color-orange fw-bold">BOILER</span>
             </div>
             <button class="bg-gnfc-blue hover:bg-blue-600 text-white px-4 py-1.5 rounded-md font-13px fw-bold flex items-center gap-1.5 shadow-sm transition-all">
                <i class="ph-bold ph-export"></i> Export PDF
             </button>
          </div>
        </div>

        <div class="overflow-x-auto custom-scroll" style="max-height: calc(100vh - 220px);">
          <table class="report-table">
            <thead>
              <tr>
                <th class="w-12 text-center">Sr</th>
                <th class="w-32">Tag No</th>
                <th class="w-48">Job</th>
                <th class="w-24">Tech</th>
                <th class="w-64">Description</th>
                <th class="w-24">Tech</th>
                <th class="w-24">Status</th>
                <th class="w-64">Remarks</th>
                <th class="w-16 text-center">Over</th>
              </tr>
            </thead>
            <tbody id="doc-table-body">
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </main>

  <script>
    const docData = [
      {
        sr: 1,
        tag: '2PV2543A_2',
        job: '',
        tech1: '',
        desc: 'As per process report speed not increase or decrease from control room. Checked found that field instrument work local normal so doubt in DCS AO card(CJ04RM8) channel (observed output not generated from AO CH-1 as earlier). AO card(CJ04RM8)CH-8 used for this tag and operation checked found ok. During this activity found EFD soft document correction required, same show to IE.',
        tech2: 'VVM',
        status: 'OVER',
        remarks: 'ok [written by: MMD Date: 20/04/2017]'
      },
      {
        sr: 2,
        tag: '1TG-1',
        job: '',
        tech1: '',
        desc: 'After thrust bearing removed by CMG all RTD element checked and found as follow... RTD element No 5,6,7,8 removed with collapse from thrust pad as per CMG requirement. RTD element no 7 is found open. RTD element no.3 replaced with spare one because of found resistive. Document change required for RTD location in thrust bearing.',
        tech2: 'VVM',
        status: 'OVER',
        remarks: 'Update doc [written by: NTD Date: 26/10/2017]'
      },
      {
        sr: 3,
        tag: '1AR2510',
        job: 'For Testing(ByYMK_SD: 18/01/2024)',
        tech1: 'CNJ_ISD',
        desc: 'Job No for testing',
        tech2: 'CNJ_ISD',
        status: 'PEND',
        remarks: 'OK [written by: RMP Date: 18/01/2024]'
      },
      {
        sr: 4,
        tag: 'PA_DHEL',
        job: '',
        tech1: '',
        desc: 'As per process defect announcement not heard at control room and operator room speaker. Detail checked found both speaker input taken from station - 14 and its power supply(Station - 13 to 16) found OFF. Power supply taken in line and as general shift report station 15 and 15 isolated from station PCB. Its document required to updated in working file and TB wire ferrule required to change at RACK-2 TB-2 TB-35,36.',
        tech2: 'VVM',
        status: 'OVER',
        remarks: 'Ok [written by: RMP Date: 15/03/2024]'
      },
      {
        sr: 5,
        tag: 'PA_DHEL',
        job: '',
        tech1: '',
        desc: 'As per process defect announcement not heard at control room and operator room speaker. Detail checked found both speaker input taken from station - 14 and its power supply(Station - 13 to 16) found OFF. Power supply taken in line and as general shift report station 15 and 15 isolated from station PCB. Its document required to updated in working file and TB wire ferrule required to change at RACK-2 TB-2 TB-35,36.',
        tech2: 'VVM',
        status: 'OVER',
        remarks: '[written by: MMD Date: 15/03/2024]'
      },
      {
        sr: 6,
        tag: '3BE2543_1',
        job: 'TEST(ByENG_TESTER: 17/02/2026)',
        tech1: 'TECH_TESTER',
        desc: 'Tested',
        tech2: 'TECH_TESTER',
        status: 'OVER',
        remarks: 'To be proper installed in shutdown [written by: ENG_TESTER Date: 17/02/2026] test3 [written by: ENG_TESTER Date: 17/02/2026]'
      }
    ];

    function escapeHTML(str) {
      if (!str) return '';
      return str.replace(/[&<>"']/g, function(m) {
        return {
          '&': '&amp;',
          '<': '&lt;',
          '>': '&gt;',
          '"': '&quot;',
          "'": '&#39;'
        }[m];
      });
    }

    function renderTable() {
      const tbody = document.getElementById('doc-table-body');
      tbody.innerHTML = docData.map(row => `
        <tr>
          <td class="text-center font-mono color-muted">${row.sr}</td>
          <td class="font-bold color-blue font-mono">${escapeHTML(row.tag)}</td>
          <td class="color-label text-xs">${escapeHTML(row.job)}</td>
          <td class="text-center font-bold color-label">${escapeHTML(row.tech1)}</td>
          <td class="color-primary leading-relaxed font-14px">${escapeHTML(row.desc)}</td>
          <td class="bg-gray-50/50 dark:bg-white/5 text-center font-bold color-label">${escapeHTML(row.tech2)}</td>
          <td class="text-center">
            <span class="${row.status === 'OVER' ? 'status-over' : 'status-pending'} font-11px uppercase tracking-wider">${row.status}</span>
          </td>
          <td class="italic color-secondary text-xs">${escapeHTML(row.remarks).replace(/\n/g, '<br>')}</td>
          <td class="text-center">
            <input type="checkbox" class="verify-checkbox" />
          </td>
        </tr>
      `).join('');
    }

    const urlParams = new URLSearchParams(window.location.search);
    const plant = urlParams.get('plant') || 'BOILER';
    document.getElementById('plant-id-display').textContent = plant;
    renderTable();
  </script>
</body>

</html>
