<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Information | GNFC E-Logbook</title>
    <link rel="stylesheet" href="/src/css/ios-fonts.css">
    <link rel="stylesheet" href="/src/css/modal-ui.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="/src/js/tailwind_config.js"></script>
    <script>window.activePage = 'user_info';</script>
    <style>
        .user-row {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .user-row:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            z-index: 10;
            position: relative;
        }
    </style>
</head>

<body class="bg-dark-bg text-dark-text font-sans antialiased selection:bg-gnfc-orange/30 selection:text-white pb-20">

    <!-- Header -->
    <header class="h-16 bg-dark-header/80 backdrop-blur-md border-b border-dark-border fixed top-0 w-full z-50 flex items-center px-4 justify-between lg:px-8">
        <div class="flex items-center gap-4">
            <button id="sidebar-toggle" class="p-2 -ml-2 rounded-lg hover:bg-white/5 color-label transition-colors lg:hidden">
                <i class="ph ph-list font-24px"></i>
            </button>
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-lg bg-linear-to-br from-gnfc-orange to-orange-600 flex items-center justify-center shadow-lg shadow-orange-500/20">
                    <span class="font-bold text-white font-18px">G</span>
                </div>
                <span class="font-18px fw-bold color-primary tracking-tight">User Management</span>
            </div>
        </div>
        <div class="flex items-center gap-4">
            <button onclick="openAddUserModal()" class="flex items-center gap-2 px-4 py-2 bg-gnfc-orange hover:bg-orange-600 color-primary rounded-lg font-14px fw-medium transition-all shadow-lg shadow-orange-500/20 active:scale-95">
                <i class="ph-bold ph-plus"></i>
                <span class="hidden sm:inline">Add User</span>
            </button>
        </div>
    </header>

    <!-- Sidebar -->
    <aside id="sidebar" class="fixed left-0 top-16 h-[calc(100vh-4rem)] w-64 bg-dark-panel border-r border-dark-border transform -translate-x-full lg:translate-x-0 transition-transform duration-300 z-40 overflow-y-auto custom-scrollbar">
        <nav class="p-4 space-y-1" id="nav-container">
            <!-- Navigation will be injected here -->
        </nav>
        <div class="p-4 border-t border-dark-border">
            <div class="flex items-center gap-3 p-3 rounded-lg bg-dark-bg/50 border border-dark-border">
                <div class="w-10 h-10 rounded-full bg-linear-to-br from-purple-500 to-indigo-600 flex items-center justify-center text-white fw-bold shadow-lg">
                    JD
                </div>
                <div class="flex-1 min-w-0">
                    <p class="font-14px fw-medium color-primary truncate">John Doe</p>
                    <p class="font-12px color-label truncate">Admin</p>
                </div>
                <button class="p-1.5 rounded-md hover:bg-white/10 color-label transition-colors">
                    <i class="ph ph-sign-out font-18px"></i>
                </button>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="lg:ml-64 pt-24 px-4 lg:px-8 max-w-7xl mx-auto space-y-6">

        <!-- Filters & Search -->
        <div class="flex flex-col sm:flex-row gap-4 items-center justify-between bg-dark-panel p-4 rounded-xl border border-dark-border shadow-sm">
            <div class="relative w-full sm:w-96">
                <i class="ph ph-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 color-label font-18px"></i>
                <input type="text" placeholder="Search users by name, role, or ID..." class="w-full pl-10 pr-4 py-2.5 bg-dark-bg border border-dark-border rounded-lg color-primary placeholder:text-dark-muted focus:ring-2 focus:ring-gnfc-orange/50 focus:border-gnfc-orange transition-all font-14px">
            </div>
            <div class="flex items-center gap-3 w-full sm:w-auto">
                <select class="bg-dark-bg border border-dark-border color-primary font-14px rounded-lg px-3 py-2.5 focus:ring-2 focus:ring-gnfc-orange/50 focus:border-gnfc-orange outline-none cursor-pointer">
                    <option value="all">All Roles</option>
                    <option value="admin">Admin</option>
                    <option value="manager">Manager</option>
                    <option value="operator">Operator</option>
                    <option value="technician">Technician</option>
                </select>
                <button class="p-2.5 rounded-lg bg-dark-bg border border-dark-border color-label hover:color-primary hover:border-dark-muted transition-colors" title="Export CSV">
                    <i class="ph ph-download-simple font-20px"></i>
                </button>
            </div>
        </div>

        <!-- Users Table -->
        <div class="bg-dark-panel border border-dark-border rounded-xl shadow-sm overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-dark-header border-b border-dark-border">
                            <th class="px-6 py-4 font-12px fw-bold color-label text-upper ls-wider w-16 text-center">
                                <div class="flex items-center justify-center">
                                    <input type="checkbox" class="w-4 h-4 rounded border-dark-border bg-dark-bg checked:bg-gnfc-orange focus:ring-offset-dark-panel">
                                </div>
                            </th>
                            <th class="px-6 py-4 font-12px fw-bold color-label text-upper ls-wider">User Details</th>
                            <th class="px-6 py-4 font-12px fw-bold color-label text-upper ls-wider">Role & Plant</th>
                            <th class="px-6 py-4 font-12px fw-bold color-label text-upper ls-wider">Status</th>
                            <th class="px-6 py-4 font-12px fw-bold color-label text-upper ls-wider">Last Active</th>
                            <th class="px-6 py-4 font-12px fw-bold color-label text-upper ls-wider text-right">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-dark-border/50" id="user-table-body">
                        <!-- Example Row 1 -->
                        <tr class="user-row hover:bg-dark-header/50 group">
                            <td class="px-6 py-4 text-center">
                                <input type="checkbox" class="w-4 h-4 rounded border-dark-border bg-dark-bg checked:bg-gnfc-orange focus:ring-offset-dark-panel">
                            </td>
                            <td class="px-6 py-4">
                                <div class="flex items-center gap-4">
                                    <div class="w-10 h-10 rounded-full bg-emerald-500/10 text-emerald-500 flex items-center justify-center fw-bold font-14px shadow-sm">
                                        JD
                                    </div>
                                    <div>
                                        <div class="font-14px fw-medium color-primary">John Doe</div>
                                        <div class="font-12px color-label">john.doe@gnfc.in</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="flex flex-col gap-1">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full font-10px fw-bold bg-blue-500/10 text-blue-500 border border-blue-500/20 w-fit">
                                        Shift Incharge
                                    </span>
                                    <span class="font-12px color-label">High-Pressure Unit</span>
                                </div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="flex items-center gap-2">
                                    <span class="relative flex h-2.5 w-2.5">
                                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                                        <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-emerald-500"></span>
                                    </span>
                                    <span class="font-12px fw-medium text-emerald-500">Active</span>
                                </div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="font-12px color-primary">2 mins ago</div>
                                <div class="font-10px color-label">From 192.168.1.45</div>
                            </td>
                            <td class="px-6 py-4 text-right">
                                <div class="opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-end gap-2">
                                    <button class="p-2 rounded-lg hover:bg-blue-500/10 text-blue-500 transition-colors" title="Edit">
                                        <i class="ph ph-pencil-simple font-18px"></i>
                                    </button>
                                    <button class="p-2 rounded-lg hover:bg-amber-500/10 text-amber-500 transition-colors" title="Reset Password">
                                        <i class="ph ph-key font-18px"></i>
                                    </button>
                                    <button class="p-2 rounded-lg hover:bg-red-500/10 text-red-500 transition-colors" title="Deactivate">
                                        <i class="ph ph-prohibit font-18px"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <!-- Empty State (Hidden by default) -->
                        <tr class="hidden">
                            <td colspan="6" class="px-6 py-12 text-center">
                                <div class="flex flex-col items-center justify-center">
                                    <div class="w-16 h-16 rounded-full bg-dark-bg border border-dark-border flex items-center justify-center mb-4 text-dark-muted">
                                        <i class="ph ph-users font-32px"></i>
                                    </div>
                                    <h3 class="font-16px fw-medium color-primary mb-1">No users found</h3>
                                    <p class="font-14px color-label">Try adjusting your search or filters</p>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="px-6 py-4 bg-dark-panel border-t border-dark-border flex items-center justify-between">
                <span class="font-12px color-label">Showing <span class="fw-medium color-primary">1-10</span> of <span class="fw-medium color-primary">45</span> users</span>
                <div class="flex items-center gap-2">
                    <button class="p-2 rounded-lg border border-dark-border bg-dark-bg hover:bg-dark-header color-label disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                        <i class="ph ph-caret-left font-14px"></i>
                    </button>
                    <button class="px-3 py-1.5 rounded-lg bg-gnfc-orange color-primary font-12px fw-medium shadow-lg shadow-orange-500/20">1</button>
                    <button class="px-3 py-1.5 rounded-lg border border-dark-border bg-dark-bg hover:bg-dark-header color-label font-12px hover:color-primary transition-colors">2</button>
                    <button class="px-3 py-1.5 rounded-lg border border-dark-border bg-dark-bg hover:bg-dark-header color-label font-12px hover:color-primary transition-colors">3</button>
                    <span class="color-label">...</span>
                    <button class="p-2 rounded-lg border border-dark-border bg-dark-bg hover:bg-dark-header color-label disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                        <i class="ph ph-caret-right font-14px"></i>
                    </button>
                </div>
            </div>
        </div>

    </main>

    <!-- Add/Edit User Modal -->
    <div id="user-modal" class="fixed inset-0 z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <!-- Backdrop -->
        <div class="fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity opacity-0" id="modal-backdrop"></div>

        <!-- Panel -->
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-2xl bg-dark-panel text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-xl border border-dark-border opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" id="modal-panel">
                    
                    <!-- Header -->
                    <div class="bg-dark-header px-4 py-3 sm:px-6 border-b border-dark-border flex justify-between items-center">
                        <div>
                            <h3 class="font-18px fw-bold color-primary" id="modal-title">Add New User</h3>
                            <p class="font-12px color-label mt-0.5">Create a new user account and assign permissions</p>
                        </div>
                        <button onclick="closeUserModal()" class="rounded-lg p-2 color-label hover:color-primary hover:bg-white/5 transition-colors">
                            <i class="ph ph-x font-20px"></i>
                        </button>
                    </div>

                    <!-- Body -->
                    <div class="px-4 py-5 sm:p-6 space-y-4">
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label class="block font-12px fw-medium color-label mb-1.5">First Name</label>
                                <input type="text" class="w-full bg-dark-bg border border-dark-border rounded-lg px-3 py-2 color-primary text-sm focus:ring-1 focus:ring-gnfc-orange focus:border-gnfc-orange outline-none transition-all placeholder:text-dark-muted" placeholder="John">
                            </div>
                            <div>
                                <label class="block font-12px fw-medium color-label mb-1.5">Last Name</label>
                                <input type="text" class="w-full bg-dark-bg border border-dark-border rounded-lg px-3 py-2 color-primary text-sm focus:ring-1 focus:ring-gnfc-orange focus:border-gnfc-orange outline-none transition-all placeholder:text-dark-muted" placeholder="Doe">
                            </div>
                        </div>

                        <div>
                            <label class="block font-12px fw-medium color-label mb-1.5">Email Address</label>
                            <div class="relative">
                                <i class="ph ph-envelope absolute left-3 top-1/2 -translate-y-1/2 color-label"></i>
                                <input type="email" class="w-full bg-dark-bg border border-dark-border rounded-lg pl-9 pr-3 py-2 color-primary text-sm focus:ring-1 focus:ring-gnfc-orange focus:border-gnfc-orange outline-none transition-all placeholder:text-dark-muted" placeholder="john.doe@gnfc.in">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label class="block font-12px fw-medium color-label mb-1.5">Role</label>
                                <select class="w-full bg-dark-bg border border-dark-border rounded-lg px-3 py-2 color-primary text-sm focus:ring-1 focus:ring-gnfc-orange focus:border-gnfc-orange outline-none transition-all appearance-none cursor-pointer">
                                    <option value="operator">Operator</option>
                                    <option value="shift_incharge">Shift Incharge</option>
                                    <option value="plant_manager">Plant Manager</option>
                                    <option value="admin">System Admin</option>
                                </select>
                            </div>
                            <div>
                                <label class="block font-12px fw-medium color-label mb-1.5">Department / Plant</label>
                                <select class="w-full bg-dark-bg border border-dark-border rounded-lg px-3 py-2 color-primary text-sm focus:ring-1 focus:ring-gnfc-orange focus:border-gnfc-orange outline-none transition-all appearance-none cursor-pointer">
                                    <option value="hpu">High Pressure Unit</option>
                                    <option value="lpu">Low Pressure Unit</option>
                                    <option value="utility">Utility</option>
                                    <option value="labor">Laboratory</option>
                                </select>
                            </div>
                        </div>

                        <!-- Permissions Preview -->
                         <div class="p-3 rounded-lg bg-dark-bg border border-dark-border/50">
                            <h4 class="font-12px fw-bold color-primary mb-2">Permissions Preview</h4>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-2 py-1 rounded bg-dark-panel border border-dark-border font-10px color-label">Read Logs</span>
                                <span class="px-2 py-1 rounded bg-dark-panel border border-dark-border font-10px color-label">Create Entries</span>
                                <span class="px-2 py-1 rounded bg-dark-panel border border-dark-border font-10px color-label">Approve Shift</span>
                            </div>
                         </div>
                    </div>

                    <!-- Footer -->
                    <div class="bg-dark-header px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-3 border-t border-dark-border">
                        <button type="button" class="w-full inline-flex justify-center rounded-lg border border-transparent bg-gnfc-orange px-4 py-2 text-base font-14px fw-medium text-white shadow-sm hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-gnfc-orange focus:ring-offset-2 focus:ring-offset-dark-panel sm:ml-3 sm:w-auto sm:text-sm transition-all shadow-lg shadow-orange-500/20">
                            Create User
                        </button>
                        <button type="button" onclick="closeUserModal()" class="mt-3 w-full inline-flex justify-center rounded-lg border border-dark-border bg-dark-panel px-4 py-2 text-base font-14px fw-medium color-primary shadow-sm hover:bg-dark-bg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-dark-panel sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-all">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Nav Overlay -->
    <div id="mobile-overlay" class="fixed inset-0 bg-black/50 z-30 hidden lg:hidden backdrop-blur-sm transition-opacity"></div>

    <script type="module" src="/src/js/nav-component.js"></script>
    <script>
        const modal = document.getElementById('user-modal');
        const backdrop = document.getElementById('modal-backdrop');
        const panel = document.getElementById('modal-panel');

        function openAddUserModal() {
            modal.classList.remove('hidden');
            // Trigger reflow
            void modal.offsetWidth;
            
            // Animate in
            backdrop.classList.remove('opacity-0');
            panel.classList.remove('opacity-0', 'translate-y-4', 'sm:translate-y-0', 'sm:scale-95');
            panel.classList.add('opacity-100', 'translate-y-0', 'sm:scale-100');
        }

        function closeUserModal() {
            // Animate out
            backdrop.classList.add('opacity-0');
            panel.classList.remove('opacity-100', 'translate-y-0', 'sm:scale-100');
            panel.classList.add('opacity-0', 'translate-y-4', 'sm:translate-y-0', 'sm:scale-95');

            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300); // Match transition duration
        }

        // Toggle Sidebar Mobile
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('mobile-overlay');
        const toggleBtn = document.getElementById('sidebar-toggle');

        function toggleSidebar() {
            const isClosed = sidebar.classList.contains('-translate-x-full');
            if (isClosed) {
                sidebar.classList.remove('-translate-x-full');
                overlay.classList.remove('hidden');
            } else {
                sidebar.classList.add('-translate-x-full');
                overlay.classList.add('hidden');
            }
        }

        toggleBtn.addEventListener('click', toggleSidebar);
        overlay.addEventListener('click', toggleSidebar);

        // Sidebar Active State handling is done by nav-component now, 
        // but we can ensure user_info is marked active if needed.
    </script>
</body>

</html>