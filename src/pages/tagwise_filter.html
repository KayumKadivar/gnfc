<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GNFC | Tag Filter Analysis</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <script src="/src/js/tailwind_config.js"></script>
  <style>
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #111217;
    }

    ::-webkit-scrollbar-thumb {
      background: #2C3235;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #444;
    }
  </style>
</head>

<body class="bg-dark-bg text-dark-text font-sans h-screen flex overflow-hidden">


  <script src="/src/js/theme_manager.js"></script>
  <script src="/src/js/sidebar.js"></script>
  <script src="/src/js/header.js"></script>
  <div id="sidebar-container"></div>
  <script>try { renderSidebar('technician_logbook'); } catch (e) { }</script>

  <main class="flex-1 flex flex-col h-screen overflow-hidden relative">

    <div id="header-container"></div>
    <script>
        renderHeader({
            title: "Acetic Acid Logbook",
            breadcrumbs: [
                { label: "Technician Log", href: "technician_logbook.html" },
                { label: "Plant Detail", href: "plant_detail.html" },
                { label: "Tagwise Filter Analysis" }
            ],
            backLink: "plant_detail.html"
        });
    </script>
    <div class="flex-1 overflow-y-auto p-6 bg-dark-bg relative">

      <div id="filter-state" class="flex flex-col items-center justify-center h-full -mt-20">
        <div class="w-full max-w-md bg-dark-panel border border-dark-border rounded-sm shadow-2xl overflow-hidden">
          <div class="bg-[#22252B] px-6 py-4 border-b border-dark-border flex items-center justify-between">
            <h3 class="font-bold text-white text-sm flex items-center gap-2">
              <i class="ph-fill ph-funnel text-gnfc-orange"></i> Tagwise Filter
            </h3>
            <i class="ph-bold ph-x text-dark-muted cursor-pointer hover:text-white"></i>
          </div>

          <div class="p-8 flex flex-col gap-6">
            <div class="flex flex-col gap-2">
              <label class="text-xs font-bold text-gnfc-blue uppercase tracking-wider">Enter Tag
                Number</label>
              <div class="relative group">
                <input type="text" id="tagInput" value="A7801A"
                  class="w-full bg-dark-bg border border-dark-border text-white text-sm rounded-sm px-4 py-3 focus:border-gnfc-blue focus:ring-1 focus:ring-gnfc-blue outline-none transition-all font-mono tracking-wide"
                  placeholder="e.g. PT-101">
                <i
                  class="ph-bold ph-magnifying-glass absolute right-4 top-1/2 -translate-y-1/2 text-dark-muted group-focus-within:text-gnfc-blue"></i>
              </div>
              <p class="text-[10px] text-dark-muted">Search strictly by tag ID to retrieve historical
                logs.</p>
            </div>

            <button onclick="showReport()"
              class="w-full bg-gnfc-blue hover:bg-blue-600 text-white font-bold py-2.5 rounded-sm shadow-lg shadow-blue-500/20 transition-all flex items-center justify-center gap-2">
              <i class="ph-bold ph-lightning"></i> Apply
            </button>
          </div>
        </div>
      </div>

      <div id="report-state" class="hidden flex-col h-full space-y-4">

        <div class="bg-dark-panel border border-dark-border rounded-sm p-3 flex items-center justify-between">
          <div class="flex items-center gap-4">
            <div class="flex items-center gap-2 px-3 py-1 bg-dark-bg border border-dark-border rounded-sm">
              <span class="text-[10px] text-dark-muted uppercase font-bold">Tag:</span>
              <span class="text-sm font-mono text-gnfc-orange font-bold" id="displayTag">A7801A</span>
            </div>
            <span class="text-xs text-dark-muted">Found <span class="text-white font-bold">10</span>
              historical records</span>
          </div>
          <button onclick="resetView()"
            class="text-xs font-bold text-gnfc-red hover:text-white flex items-center gap-1">
            <i class="ph-bold ph-x-circle"></i> CLEAR FILTER
          </button>
        </div>

        <div class="bg-dark-panel border border-dark-border rounded-sm shadow-sm flex-1 flex flex-col overflow-hidden">

          <div class="overflow-x-auto flex-1">
            <table class="w-full text-left border-collapse">
              <thead class="sticky top-0 z-10">
                <tr
                  class="bg-dark-header text-[10px] font-bold text-dark-muted uppercase tracking-widest text-center border-b border-dark-border">
                  <th rowspan="2" class="border-r border-dark-border px-2 py-3 w-10">Sr</th>
                  <th rowspan="2" class="border-r border-dark-border px-2 py-3 w-16">Area</th>
                  <th class="border-r border-dark-border px-2 py-1 w-32 border-b border-dark-border text-white">
                    LoopNo</th>
                  <th
                    class="border-r border-dark-border px-2 py-1 min-w-[150px] border-b border-dark-border text-white">
                    Job</th>
                  <th rowspan="2" class="border-r border-dark-border px-2 py-3 w-16">Tech</th>
                  <th rowspan="2" class="border-r border-dark-border px-4 py-3 min-w-[300px] text-left">
                    Description</th>
                  <th rowspan="2" class="border-r border-dark-border px-2 py-3 w-16">Tech</th>
                  <th rowspan="2" class="border-r border-dark-border px-2 py-3 w-20">Status</th>
                  <th rowspan="2" class="px-4 py-3 min-w-[150px]">Remarks</th>
                </tr>
                <tr
                  class="bg-dark-header text-[9px] font-bold text-gnfc-blue uppercase text-center border-b border-dark-border">
                  <th class="border-r border-dark-border px-2 py-1">TagNo</th>
                  <th class="border-r border-dark-border px-2 py-1">TypeOfJob</th>
                </tr>
              </thead>
              <tbody id="reportTableBody" class="text-xs font-mono">
              </tbody>
            </table>
          </div>
        </div>
      </div>

    </div>
  </main>

  <script>
    // Data from your image (image_4bfdda.png)
    const historyData = [
      {
        date: '30/01/2026',
        items: [
          { sr: 1, area: '7800', loop: 'N.A.', tag: 'A7801A', job: 'To be checked as reported Cable found full in hanging condition near 7800 sec.', type: 'HOUSE KEEPING', tech1: 'ALS', desc: 'Proper cable dressing done.', tech2: 'ALS', status: 'OVER' }
        ]
      },
      {
        date: '29/01/2026',
        items: [
          { sr: 2, area: 'N.A.', loop: 'N.A.', tag: 'A7801A', job: 'To be checked as reported Cable found full in hanging condition near 7800 sec.', type: 'HOUSE KEEPING', tech1: 'ALS', desc: 'Job is U/P.', tech2: 'ALS', status: 'U/P' }
        ]
      },
      {
        date: '24/01/2026',
        items: [
          { sr: 3, area: '7800', loop: 'N.A.', tag: 'A7801A', job: 'To be checked as reported Cable found full in hanging condition near 7800 sec.', type: 'HOUSE KEEPING', tech1: 'ALS', desc: 'Cable was detached from cable tray. So it is req to dressing it proper.', tech2: 'ALS', status: 'U/P' }
        ]
      },
      {
        date: '02/03/2022',
        items: [
          { sr: 4, area: '7800', loop: 'N.A.', tag: 'A7801A', job: '7800 all sequence valve oil level to be topped up.', type: 'PM', tech1: 'ALS', desc: 'KV7802, 7804, 7805, 7807 oil filling done.', tech2: 'ALS', status: 'OVER' }
        ]
      },
      {
        date: '10/07/2017',
        items: [
          { sr: 5, area: '7800', loop: 'N.A.', tag: 'A7801A', job: '', type: 'PROCESS REQMT', tech1: '', desc: 'TE449 -As per process requirement Element disconnected from its nipple union connections.', tech2: 'GAZ', status: 'OVER' }
        ]
      },
      {
        date: '12/11/2013',
        items: [
          { sr: 6, area: '7800', loop: 'N.A.', tag: 'A7801A', job: '', type: 'N.A.', tech1: '', desc: '-Visited to store and Metso metso make valve PV2303, PV2304, PV2325 valve spare part identified and its list prepared.', tech2: 'GAZ', status: 'OVER' }
        ]
      },
      {
        date: '21/05/2011',
        items: [
          { sr: 7, area: 'N.A.', loop: 'N.A.', tag: 'A7801A', job: '', type: 'PROCESS REQMT', tech1: '', desc: 'As per process req. Pressure measurement of N2 line after NRV done(5.8bar).', tech2: 'ALS', status: 'OVER' }
        ]
      },
      {
        date: '20/05/2011',
        items: [
          { sr: 8, area: 'N.A.', loop: 'N.A.', tag: 'A7801A', job: '', type: 'PROCESS REQMT', tech1: '', desc: 'As per process req. pressure measurement done(70bar) in Nitrogen line in A7801.', tech2: 'ALS', status: 'OVER' }
        ]
      },
      {
        date: '01/10/2009',
        items: [
          { sr: 9, area: '7800', loop: 'N.A.', tag: 'A7801A', job: 'SEC 7800 C/V pm to be done.', type: 'PM', tech1: 'JMD', desc: 'Permit not issued due to startup activity.', tech2: 'JMD', status: 'OVER' }
        ]
      },
      {
        date: '22/06/2007',
        items: [
          { sr: 10, area: 'N.A.', loop: 'N.A.', tag: 'A7801A', job: 'analyzer round to be taken', type: 'PM', tech1: 'JMD', desc: 'Routine analyzer round taken, except sec500/600. Also CO level was found high in sec700 ana. room.', tech2: 'JMD', status: 'OVER' }
        ]
      }
    ];

    function showReport() {
      const tagInput = document.getElementById('tagInput').value;
      if (!tagInput) return;

      document.getElementById('displayTag').innerText = tagInput;
      document.getElementById('filter-state').classList.add('hidden');
      document.getElementById('report-state').classList.remove('hidden');
      document.getElementById('report-state').classList.add('flex');

      renderTable();
    }

    function resetView() {
      document.getElementById('filter-state').classList.remove('hidden');
      document.getElementById('report-state').classList.add('hidden');
      document.getElementById('report-state').classList.remove('flex');
    }

    function renderTable() {
      const tbody = document.getElementById('reportTableBody');
      tbody.innerHTML = '';

      historyData.forEach(group => {
        // 1. Date Header Row
        const headerRow = `
                    <tr class="bg-[#22252B] border-y border-dark-border">
                        <td colspan="9" class="px-4 py-1.5 text-[11px] font-bold text-gnfc-orange uppercase tracking-wide flex items-center gap-2">
                            <i class="ph-fill ph-calendar-blank"></i> ${group.date}
                        </td>
                    </tr>
                `;
        tbody.innerHTML += headerRow;

        // 2. Data Rows
        group.items.forEach(item => {
          const statusClass = item.status === 'OVER'
            ? 'text-gnfc-green bg-gnfc-green/10 border-gnfc-green/20'
            : 'text-gnfc-orange bg-gnfc-orange/10 border-gnfc-orange/20';

          const row = `
                        <tr class="hover:bg-white/5 transition-colors border-b border-dark-border group">
                            <td class="border-r border-dark-border px-2 py-3 text-center text-dark-muted font-mono">${item.sr}</td>
                            <td class="border-r border-dark-border px-2 py-3 font-bold text-white text-center">${item.area}</td>

                            <td class="border-r border-dark-border px-2 py-3">
                                <div class="text-xs text-dark-muted">${item.loop}</div>
                                <div class="text-xs font-bold text-gnfc-blue mt-1">${item.tag}</div>
                            </td>

                            <td class="border-r border-dark-border px-2 py-3">
                                <div class="text-xs text-gray-300 leading-tight mb-1" title="${item.job}">${item.job || '-'}</div>
                                <span class="text-[9px] font-bold text-gnfc-orange uppercase bg-dark-bg px-1 rounded border border-dark-border">${item.type}</span>
                            </td>

                            <td class="border-r border-dark-border px-2 py-3 text-center font-bold text-white text-xs">${item.tech1}</td>

                            <td class="border-r border-dark-border px-4 py-3 text-xs text-dark-text leading-relaxed">
                                ${item.desc}
                            </td>

                            <td class="border-r border-dark-border px-2 py-3 text-center font-bold text-white text-xs">${item.tech2}</td>

                            <td class="border-r border-dark-border px-2 py-3 text-center">
                                <span class="inline-block text-[10px] font-black uppercase tracking-widest px-2 py-0.5 rounded-sm border ${statusClass}">
                                    ${item.status}
                                </span>
                            </td>

                            <td class="px-2 py-3"></td>
                        </tr>
                    `;
          tbody.innerHTML += row;
        });
      });
    }
  </script>
</body>

</html>