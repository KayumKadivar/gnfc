<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>System Performance Monitoring | GNFC</title>
  
  <link rel="stylesheet" href="/src/css/ios-fonts.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
          colors: {
            'dark-bg': '#0f172a', /* slate-900 */
            'dark-panel': '#1e293b', /* slate-800 */
            'dark-border': '#334155', /* slate-700 */
            'dark-text': '#f8fafc', /* slate-50 */
            'dark-muted': '#94a3b8', /* slate-400 */
            'gnfc-blue': '#3b82f6', /* blue-500 */
            'gnfc-cyan': '#06b6d4', /* cyan-500 */
            'gnfc-orange': '#f97316', /* orange-500 */
            'gnfc-green': '#10b981', /* emerald-500 */
            'gnfc-red': '#ef4444', /* red-500 */
          }
        }
      }
    }
  </script>

  <style>
    /* Glassmorphism */
    .glass-panel {
      background: rgba(30, 41, 59, 0.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.08); /* White border with low opacity */
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
    }

    html[data-theme-mode="light"] .glass-panel {
      background: rgba(255, 255, 255, 0.88);
      border-color: rgba(148, 163, 184, 0.35);
      box-shadow: 0 12px 36px rgba(15, 23, 42, 0.12);
    }
    
    .glass-header {
      background: rgba(15, 23, 42, 0.85); /* Dark bg */
      backdrop-filter: blur(8px);
      border-bottom: 1px solid rgba(51, 65, 85, 0.5); /* Slate border */
    }

    html[data-theme-mode="light"] .glass-header {
      background: rgba(255, 255, 255, 0.92);
      border-bottom-color: rgba(148, 163, 184, 0.35);
    }

    /* Selection Highlighting */
    input[type="radio"]:checked + label {
      background-color: rgba(59, 130, 246, 0.1); /* Blue-500 with low opacity */
      border-color: #3b82f6;
      color: #3b82f6;
    }
    input[type="radio"]:checked + label i {
        color: #3b82f6;
    }
  </style>
</head>

<body class="bg-dark-bg text-dark-text h-screen flex overflow-hidden selection:bg-gnfc-blue selection:text-white">

  <script src="/src/js/theme_manager.js"></script>

  <!-- Sidebar Container -->
  <div id="sidebar-container"></div>
  <script src="/src/js/sidebar.js"></script>
  <script>try { renderSidebar('technician_logbook'); } catch (e) { console.error(e); }</script>

  <main class="flex-1 flex flex-col h-screen overflow-hidden relative">
    
    <!-- Background Gradient Effect -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none z-0">
        <div class="absolute top-[-10%] right-[-5%] w-[500px] h-[500px] bg-gnfc-blue/5 rounded-full blur-[100px] animate-pulse"></div>
        <div class="absolute bottom-[-10%] left-[-10%] w-[600px] h-[600px] bg-gnfc-cyan/5 rounded-full blur-[120px]"></div>
    </div>

    <!-- Header -->
    <div id="header-container"></div>
    <script src="/src/js/header.js"></script>
    <script>
      // Function to parse query parameters
      function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
      }

      const systemName = getQueryParam('system') || 'System'; // Default if none provided

      renderHeader({
        title: "Acetic Acid Plant",
        breadcrumbs: [
          { label: "Technician Log", href: "technician_logbook.html" },
          { label: "Plant Detail", href: "plant_detail.html" },
          { label: "System Performance", href: "#" },
          { label: systemName } 
        ],
        backLink: "plant_detail.html"
      });
    </script>

    <!-- Main Content Area -->
    <div class="flex-1 p-4 relative custom-scrollbar flex flex-col">
      
      <!-- Top Navigation Bar -->
      <div id="plant-nav-container"></div>
      <script src="/src/js/plant_nav.js"></script>
      <script>
        renderPlantNav('sy_pm');
      </script>


      <!-- Central Selection Panel -->
      <div>
        <div class="glass-panel w-full p-8 rounded-2xl flex flex-col items-center relative overflow-hidden">
            
            <!-- System Title -->
            <div class="text-center mb-10 relative z-10">
                <h2 class="text-sm font-bold text-gnfc-orange tracking-[0.2em] uppercase mb-2">Acetic Acid Plant</h2>
                <h1 class="text-3xl md:text-4xl font-extrabold text-dark-text tracking-tight leading-tight">
                    <span id="system-title-display">System</span> Performance Monitoring Data
                </h1>
                <div class="h-1 w-24 bg-gradient-to-r from-transparent via-gnfc-blue to-transparent mx-auto mt-6 rounded-full"></div>
            </div>

            <!-- Frequency Selection Group -->
            <div class="w-full mb-12">
                <h3 class="text-xs font-bold text-dark-muted uppercase tracking-wider mb-4 text-center">Select Monitoring Frequency</h3>
                
                <div class="flex flex-wrap justify-center gap-3">
                    
                    <!-- Daily -->
                    <div class="relative">
                        <input type="radio" name="frequency" id="freq-daily" value="daily" class="peer hidden" checked>
                        <label for="freq-daily" class="flex items-center gap-2 px-5 py-3 bg-dark-bg border border-dark-border rounded-lg cursor-pointer hover:border-gnfc-blue/50 hover:bg-dark-panel transition-all group">
                            <i class="ph-bold ph-sun text-lg text-dark-muted group-hover:text-dark-text transition-colors"></i>
                            <span class="text-sm font-bold text-dark-muted group-hover:text-dark-text transition-colors">DAILY</span>
                        </label>
                    </div>

                    <!-- Weekly -->
                    <div class="relative">
                        <input type="radio" name="frequency" id="freq-weekly" value="weekly" class="peer hidden">
                        <label for="freq-weekly" class="flex items-center gap-2 px-5 py-3 bg-dark-bg border border-dark-border rounded-lg cursor-pointer hover:border-gnfc-blue/50 hover:bg-dark-panel transition-all group">
                            <i class="ph-bold ph-calendar-check text-lg text-dark-muted group-hover:text-dark-text transition-colors"></i>
                            <span class="text-sm font-bold text-dark-muted group-hover:text-dark-text transition-colors">WEEKLY</span>
                        </label>
                    </div>

                    <!-- Monthly -->
                    <div class="relative">
                        <input type="radio" name="frequency" id="freq-monthly" value="monthly" class="peer hidden">
                        <label for="freq-monthly" class="flex items-center gap-2 px-5 py-3 bg-dark-bg border border-dark-border rounded-lg cursor-pointer hover:border-gnfc-blue/50 hover:bg-dark-panel transition-all group">
                            <i class="ph-bold ph-calendar-blank text-lg text-dark-muted group-hover:text-dark-text transition-colors"></i>
                            <span class="text-sm font-bold text-dark-muted group-hover:text-dark-text transition-colors">MONTHLY</span>
                        </label>
                    </div>

                    <!-- Quarterly -->
                    <div class="relative">
                        <input type="radio" name="frequency" id="freq-quarterly" value="quarterly" class="peer hidden">
                        <label for="freq-quarterly" class="flex items-center gap-2 px-5 py-3 bg-dark-bg border border-dark-border rounded-lg cursor-pointer hover:border-gnfc-blue/50 hover:bg-dark-panel transition-all group">
                            <i class="ph-bold ph-chart-pie-slice text-lg text-dark-muted group-hover:text-dark-text transition-colors"></i>
                            <span class="text-sm font-bold text-dark-muted group-hover:text-dark-text transition-colors">QUARTERLY</span>
                        </label>
                    </div>

                    <!-- Half Yearly -->
                    <div class="relative">
                        <input type="radio" name="frequency" id="freq-halfyearly" value="halfyearly" class="peer hidden">
                        <label for="freq-halfyearly" class="flex items-center gap-2 px-5 py-3 bg-dark-bg border border-dark-border rounded-lg cursor-pointer hover:border-gnfc-blue/50 hover:bg-dark-panel transition-all group">
                            <i class="ph-bold ph-calendar-x text-lg text-dark-muted group-hover:text-dark-text transition-colors"></i>
                            <span class="text-sm font-bold text-dark-muted group-hover:text-dark-text transition-colors">HALF YEARLY</span>
                        </label>
                    </div>

                    <!-- Shutdown -->
                    <div class="relative">
                        <input type="radio" name="frequency" id="freq-shutdown" value="shutdown" class="peer hidden">
                        <label for="freq-shutdown" class="flex items-center gap-2 px-5 py-3 bg-dark-bg border border-dark-border rounded-lg cursor-pointer hover:border-gnfc-red/50 hover:bg-dark-panel transition-all group">
                            <i class="ph-bold ph-plugs text-lg text-dark-muted group-hover:text-gnfc-red transition-colors"></i>
                            <span class="text-sm font-bold text-dark-muted group-hover:text-gnfc-red transition-colors">SHUTDOWN</span>
                        </label>
                    </div>

                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex items-center gap-6 w-full max-w-md">
                
                <!-- Static Data Button -->
                <button onclick="handleAction('static')" class="flex-1 group relative overflow-hidden rounded-xl bg-dark-bg border border-dark-border p-px shadow-lg hover:shadow-gnfc-blue/20 transition-all hover:-translate-y-1">
                    <span class="absolute inset-x-0 -bottom-px block h-px w-full bg-gradient-to-r from-transparent via-gnfc-blue to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></span>
                    <span class="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></span>
                    <div class="relative flex flex-col items-center justify-center py-6 px-4 bg-dark-panel rounded-[11px] h-full">
                        <div class="mb-3 p-3 rounded-full bg-dark-bg border border-dark-border group-hover:border-gnfc-blue/30 group-hover:bg-gnfc-blue/10 transition-colors">
                            <i class="ph-fill ph-database text-2xl text-dark-muted group-hover:text-gnfc-blue transition-colors"></i>
                        </div>
                        <span class="text-lg font-bold text-dark-text mb-1">Static Data</span>
                        <span class="text-[10px] text-dark-muted uppercase tracking-wider group-hover:text-gnfc-blue/80 transition-colors">View / Edit</span>
                    </div>
                </button>

                <!-- Report Button -->
                <button onclick="handleAction('report')" class="flex-1 group relative overflow-hidden rounded-xl bg-dark-bg border border-dark-border p-px shadow-lg hover:shadow-gnfc-green/20 transition-all hover:-translate-y-1">
                    <span class="absolute inset-x-0 -bottom-px block h-px w-full bg-gradient-to-r from-transparent via-gnfc-green to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></span>
                    <span class="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></span>
                    <div class="relative flex flex-col items-center justify-center py-6 px-4 bg-dark-panel rounded-[11px] h-full">
                        <div class="mb-3 p-3 rounded-full bg-dark-bg border border-dark-border group-hover:border-gnfc-green/30 group-hover:bg-gnfc-green/10 transition-colors">
                            <i class="ph-fill ph-file-text text-2xl text-dark-muted group-hover:text-gnfc-green transition-colors"></i>
                        </div>
                        <span class="text-lg font-bold text-dark-text mb-1">Generate Report</span>
                        <span class="text-[10px] text-dark-muted uppercase tracking-wider group-hover:text-gnfc-green/80 transition-colors">Analyze Data</span>
                    </div>
                </button>

            </div>

        </div>

      </div>

    </div>
  </main>

  <script>
    // --- Initialize Page Logic ---
    document.addEventListener('DOMContentLoaded', () => {
        // Update Title from URL
        const titleEl = document.getElementById('system-title-display');
        if (titleEl && systemName) {
            titleEl.textContent = systemName.replace(' DCS', '').replace(' ESD', ''); // Simplifying for cleaner UI
        }
    });

    // --- Action Handler ---
    function handleAction(action) {
        const selectedFreq = document.querySelector('input[name="frequency"]:checked');
        if (!selectedFreq) {
            alert("Please select a frequency first.");
            return;
        }

        const frequency = selectedFreq.value;
        const system = getQueryParam('system') || 'Unknown';

        console.log(`Action: ${action}, Frequency: ${frequency}, System: ${system}`);

        // TODO: Implement actual navigation or modal logic here
        // For now, just show feedback
        if(action === 'report') {
             // Maybe go to Sy_PM1.html (the dashboard) with params?
             // window.location.href = `Sy_PM1.html?system=${system}&freq=${frequency}`;
             alert(`Generating ${frequency} report for ${system}...`);
        } else {
             // Navigate to Static Data page
             window.location.href = `static_data.html?system=${encodeURIComponent(system)}&freq=${encodeURIComponent(frequency)}`;
        }
    }
  </script>
</body>
</html>
